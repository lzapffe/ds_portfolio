---
title: "Tidyverse vs base R"
---

So, I started this project with a goal of looking into Tidyverse. I learned to program in Python first and then R and I am mostly used to using base R and not Tidyverse. However, I know that a lot of people think that Tidyverse is a lot better. So my goal starting this project was to contrast and compare Tidyverse and base R and the come to a conclusion regarding which seemed to be the most helpful and when. However, I ended up going in a little more informal direction. As I learned more about the basics of Tidyverse, I started trying to use it more to learn more about it and ended up really liking it in the end. It is a little different than base R and Python as I was thaugt it, but if you know how to use it, it can really speed up coding and making the output easier to interpret. There are still plenty of cases in which the Tidyverse solutions aren't flexible enough and I have had to revert to using base R, but now I always google whether there is a function for something in Tidyverse before starting writing a complicated and often vectorized function in base R. Most often than not, there has been a function for it in Tidyverse. I think most of the work I have done has been behind the scenes when working on the applied projects (projects 7, 8, and 9), where I have progressively (altough this is not reflected in the progression of the projects, but instead the time of when I worked on the projects) used more and more Tidyverse solutions instead of solutions in base R.

I have therefore now switch to using Tidyverse by default wherever I can and rather fall back on base R when that is needed. I still think that base R is useful because it offers a lot more flexibility than Tidyverse. However, Tidyverse is improving fast and has had a solution for most of the scenarios I have been in. The following section will go over some of the notes and reflections I have made about Tidyverse so that I can come back for reference later. However, this is fairly rough, as most of the learning have happened through playing around with Tidyverse solutions when working on my applied projects. Those projects might therefore be a better metric of what I have learned about Tidyverse than this section. I am anyway eager to share the notes that I do have so far and to brainstorm further challenges, considerations, and opportunities in Tidyverse to look further into later. I deleted the sections I originally had about Tidyverse vs base R as they were intended to let me compare and contrast when to use each. This isn't necessary anymore since my default has become to use Tidyverse until that doesn't seem to offer enough flexibility and then switch to base R.


# General Tidyverse Notes

Tidyverse has gotten a lot of attention when it comes to data science and I have mostly encountered it through Pandas in Python and how there is some controversy around it as Pandas is based on R. However, it seems to have a lot of really useful functions that speed up writing the code and makes things a lot easier to read.

Tidyverse is considered an universe of libraries. Some libraries are considered part of the core of Tidyverse. These are the libraries that get loaded automatically when you load the Tidyverse library. These include:

- ggplot2 - Creating flexible graphs
- dplyr - Easy data wrangling and manipulation
- tidyr - Functions for wrangling tibbles and and data frames, such as pivoting
- readr - Reads in data into R from other file formats
- purrr - Functions for vectorized operations without using loops
- tibble - Type of data frame that is more user-friendly
- stringr - Functions to manipulate strings and text
- forcats - Functions to manipulate factors
- lubridate - functions to manipulate dates and time in R

As you will see, I have mostly used dplyr and ggplot2 in the code for this portfolio.

In addition, there are other libraries that from the Tidyverse universe that you can load separately, including:

- broom - Summarizes data from models into a tibble
  - Has three functions, tidy(), glance(), and augment()
  - What you use with Tyidymodels to get quick and clear output from your models
- cli - Color palettes
- conflicted - Throws you an error if you are using a function that exists in multiple loaded packages, so that you have to specify which package to get the function from. Reduces the chance of using the wrong function due to conflicting functions
- dbplyr - dplyr for data bases
  - Allows you to use remote data bases as if they were loaded into your memory
- dtplyr - Backend for data tables
  - Allow you to write dplyr code, but have it automatically be translated into code that works on data tables. This can be desirable as data tables are faster than tibbles
- googledrive - Allows you to interact with Google Drive through R
  - You can get files, get the drive, edits files, share them, and so on
- googlesheets4 - Allows you to create and edits Google sheets from R
- haven - Read and write data to and from SPSS, Stata, and SAS files
- 


In addition, there are also Tidymodels. As of now, I think other individual packages for the various statistical methods work better. But Tidymodels might be more useful in a few years, so I might come back to evaluate it then. However, as of now, I do not use Tidymodels. There are several libraries in Tidymodels that are a part of the core, including tidymodels, rsample, parsnip, recipes, workflows, tune, yardstick, broom, dials.

# Dplyr

Dplyr 

# Useful dplyr functions

The first argument of dplyr functions is always the data frame. Dplyr only takes a data frame or tibble, not a matrix or vector.


Displaying data:

- names() - show the variable names of the data set
- glimpse() - show variable names and the first few objects per column


Subsetting data:

- select() - pick columns by name
  - If you want multiple columns, just add them as more parameters
- slice() - pick rows using index
- filter() - subsetting rows based on some criteria
- distinct() - filter for unique rows


Other:

- arrange() - reorder rows ascending
  - Add desc() as a parameter to make it descending
- mutate() - add a new variable
  -   mutate(
    number_of_cats = case_when(
      name == "Ginger Clark" ~ "2",
      name == "Doug Bass"    ~ "3",
      TRUE                   ~ number_of_cats
      ),
    number_of_cats = as.numeric(number_of_cats)
    )
- group_by() - for grouped operations (calculate per group, like split file in SPSS)
- rename() - rename columns


Stats:

- summarize() - reduce variables to values
- summarize.at() - like summarize, but with multiple variables
- count() - count instance of each value
- n.distinct() - counts number of distinct instances


Joining data frames:

- left_join() - Take everything that matches with x in y and also include anything left over from x
- right_join() - Take everything that matches with y in x and also include anything left over from y
- full_join() - Take everything from all data frames
- semi_join() - Only combine the rows that are common for both data frame x andy, but you only keep values from x. Essentially, it is like filtering data frame x to only keep the rows that is shared with y, but nothing is really combined from y
- inner_join() - Just combine what rows are in common in both data frame x and y
- anti_join() - Only keep what is different between data frame x and y


## Forcats

You can use path_package() to find the path for a file based on some strings to match

## Other packages

readr to get files imported properly, for example, not having all strings converted to factors automatically such as happens with base r


## Things to look at

### For advanced vectorized functions and dplyr project

1. Do.call() vs vectorized operations
2. Map.dffr in purr (this is depricated) vs vecotrized operations
3. .attributes function (not just dplyr)
4. Vectorized operations building on previous output. Now I only know how to do this with loops
5. across(), rowwise(), any_of(), all_of(), everything(), ~, .x (is column?)
6. !! from rlang to dynamically evaluate expressions. Uses := instead of =

## To do list

- Add in how to integrate base R into pipelines if needed
- Discuss piping (how to do it + benefits of it)
  - Less repetitive code
- Make an overview of the Tidyverse packages and what they do
- Do a deep dive into some of the packages and go over useful functions
- Add dplyr commands
- Look up weird dplyr things I have seen


# Things to look into more in the future

- Try out some of the Tidymodels libraries that seem interesting, especially recipies, workflows, and rsample